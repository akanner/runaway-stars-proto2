{% extends 'base.html.twig' %}
{% block stylesheets %}
    <style>
        
    </style>
   
{% endblock %}
{% block javascripts %}
<script src="js/lib.js"></script>
<script type="text/javascript">


    //enables submit button
    $( "#answer-button" ).on( "click", function( event ) {
      //validates the form
      formSelector = "#runaway-stars-form";
      form          = $(formSelector);
      form.validate({
          errorPlacement: function(error,element) {
            return true;
          }
        });
      if(!form.valid())
      {
        alert("Debe seleccionar al menos una imagen");
        return;
      }
      //shows answer and help text
      radioSelected    = $('input[name=answer]:checked', '#runaway-stars-form');
      starContainer    = radioSelected.parents('.star-container');
      showResponse(starContainer,isInTrainingMode());
      //enables submit button
      $("#submit-button").prop('disabled', false);
      $(this).prop('disabled',true);
      $(" input:radio").addClass('hidden');
      //adds points
      addPointsFor(starContainer);
    });
</script>

{% endblock %}
{% block body %}
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <h2>Prototipo Runaway Stars</h2>
            </div>
        </div>
        <div class="row" id="score-div">
            <div class="col-md-10"></div>
            <div class="col-md-2">
                <h3>PUNTOS: <span id="score">{{points}}</span></h3>
            </div>
        </div>
        <form id="runaway-stars-form" class="well" action="/processResponse" method="POST">
            <div class="row">
                <h3 class="centered">Podes Indicar la 'Runaway Star'?</h3>
            </div>
            <div class="row">
                {% for img in images %}
                    <div class="star-container col-md-4 col-md-4">
                        <div class="row">
                            <div class="col-md-12">
                                <div class="start-img" style="background: transparent url('{{img.path}}');background-size: cover; min-height: 600px;   background-repeat: no-repeat;"></div>
                            </div>
                        </div>
                        <div class="row answer hidden">
                            <div class="col-md-4 col-md-offset-4">
                               <strong class="answerText {{img.cssClass}}">{{img.correctText}}</strong>
                               <p class="answerValue hidden">{{img.correct}}</p>
                           </div>
                        </div>
                        <div class="row">
                            <div class="col-md-1 col-md-offset-5">
                                <input class="centered" type="radio" name="answer" required="required" value="{{img.id}}">
                            </div>
                            <div class="col-md-6"></div>
                        </div>
                    </div>
                {% endfor %}
            </div>
            <div class="row"><div class="col-md-12"></div></div>
            <div class="row">
                <div class="col-md-12">
                    <p class="bg-success">{{help_text}}</p>
                </div>
            </div>
            <div class="row">
                <div class="col-md-1 col-md-offset-10">
                    <button type="button" id="answer-button" class="btn btn-lg btn-primary">Contestar!</button>
                </div>
                <div class="col-md-1">
                    <button type="submit" id="submit-button" disabled="disabled" class="btn btn-lg btn-success">Siguiente</button>
                </div>
            </div>
        </form>
        <div id="close-div" class="row">
            <div class="col-md-2 col-md-offset-5">
                <form id="runaway-stars-form"  action="/logout" method="POST">
                    <input class="btn btn-lg btn-danger" type="submit" value="Teminar!"/>
                </form>
            </div>
            <div class="col-md-5"></div>
        </div>  
    </div>  

    <!-- points -->
    <div class="hidden" id="div-points">
        <p id="correct-points">{{correct_points}}</p>
        <p id="inorrect-points">{{incorrect_points}}</p>
    </div>
    <!-- training-mode -->
    <p class="hidden" id="tmode">{{training_mode}}</p>

{% endblock %}
